import"./echarts.aab74076.js";import{h as e,j as t,S as a,k as i,l as n,n as r,u as l,G as o,o as s,p as h,R as d,Z as u,C as p,q as g,s as v,B as c,t as m,v as w}from"./index.5fa80180.js";e({type:"series.liquidFill",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,i){var n=t(e.data,{coordDimensions:["value"]}),r=new a(n,this);return r.initData(e.data),r},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});var f=i({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,t){null==t.radiusY&&(t.radiusY=t.radius);for(var a=Math.max(2*Math.ceil(2*t.radius/t.waveLength*4),8);t.phase<2*-Math.PI;)t.phase+=2*Math.PI;for(;t.phase>0;)t.phase-=2*Math.PI;var i=t.phase/Math.PI/2*t.waveLength,n=t.cx-t.radius+i-2*t.radius;e.moveTo(n,t.waterLevel);for(var r=0,l=0;l<a;++l){var o=l%4,s=y(l*t.waveLength/4,o,t.waveLength,t.amplitude);e.bezierCurveTo(s[0][0]+n,-s[0][1]+t.waterLevel,s[1][0]+n,-s[1][1]+t.waterLevel,s[2][0]+n,-s[2][1]+t.waterLevel),l===a-1&&(r=s[2][0])}t.inverse?(e.lineTo(r+n,t.cy-t.radiusY),e.lineTo(n,t.cy-t.radiusY),e.lineTo(n,t.waterLevel)):(e.lineTo(r+n,t.cy+t.radiusY),e.lineTo(n,t.cy+t.radiusY),e.lineTo(n,t.waterLevel)),e.closePath()}});function y(e,t,a,i){return 0===t?[[e+.5*a/Math.PI/2,i/2],[e+.5*a/Math.PI,i],[e+a/4,i]]:1===t?[[e+.5*a/Math.PI/2*(Math.PI-2),i],[e+.5*a/Math.PI/2*(Math.PI-1),i/2],[e+a/4,0]]:2===t?[[e+.5*a/Math.PI/2,-i/2],[e+.5*a/Math.PI,-i],[e+a/4,-i]]:[[e+.5*a/Math.PI/2*(Math.PI-2),-i],[e+.5*a/Math.PI/2*(Math.PI-1),-i/2],[e+a/4,0]]}const M=g;n({type:"liquidFill",render:function(e,t,a){var i=this.group;i.removeAll();var n=e.getData(),g=n.getItemModel(0),y=g.get("center"),I=g.get("radius"),P=a.getWidth(),b=a.getHeight(),L=Math.min(P,b),S=0,x=0,C=e.get("outline.show");C&&(S=e.get("outline.borderDistance"),x=M(e.get("outline.itemStyle.borderWidth"),L));var D,F,T,Y=M(y[0],P),A=M(y[1],b),E=!1,z=e.get("shape");("container"===z?(E=!0,F=[(D=[P/2,b/2])[0]-x/2,D[1]-x/2],T=[M(S,P),M(S,b)],I=[Math.max(F[0]-T[0],0),Math.max(F[1]-T[1],0)]):(F=(D=M(I,L)/2)-x/2,T=M(S,L),I=Math.max(F-T,0)),C)&&(j().style.lineWidth=x,i.add(j()));var B=E?0:Y-I,W=E?0:A-I,k=null;i.add(function(){var t=O(I);t.setStyle(e.getModel("backgroundStyle").getItemStyle()),t.style.fill=null,t.z2=5;var a=O(I);a.setStyle(e.getModel("backgroundStyle").getItemStyle()),a.style.stroke=null;var i=new o;return i.add(t),i.add(a),i}());var q=this._data,G=[];function O(e,t){if(z){if(0===z.indexOf("path://")){var a=v(z.slice(7),{}),i=a.getBoundingRect(),n=i.width,r=i.height;n>r?(r*=2*e/n,n=2*e):(n*=2*e/r,r=2*e);var l=t?0:Y-n/2,o=t?0:A-r/2;return a=v(z.slice(7),{},new c(l,o,n,r)),t&&(a.position=[-n/2,-r/2]),a}if(E){var s=t?-e[0]:Y-e[0],h=t?-e[1]:A-e[1];return m("rect",s,h,2*e[0],2*e[1])}h=t?-e:A-e;return"pin"===z?h+=e:"arrow"===z&&(h-=e),m(z,s=t?-e:Y-e,h,2*e,2*e)}return new w({shape:{cx:t?0:Y,cy:t?0:A,r:e}})}function j(){var t=O(D);return t.style.fill=null,t.setStyle(e.getModel("outline.itemStyle").getItemStyle()),t}function N(t,a,i){var r=E?I[0]:I,l=E?b/2:I,o=n.getItemModel(t),h=o.getModel("itemStyle"),d=o.get("phase"),u=M(o.get("amplitude"),2*l),p=M(o.get("waveLength"),2*r),g=l-n.get("value",t)*l*2;d=i?i.shape.phase:"auto"===d?t*Math.PI/4:d;var v=h.getItemStyle();if(!v.fill){var c=e.get("color"),m=t%c.length;v.fill=c[m]}var w=new f({shape:{waveLength:p,radius:r,radiusY:l,cx:2*r,cy:0,waterLevel:g,amplitude:u,phase:d,inverse:a},style:v,position:[Y,A]});w.shape._waterLevel=g;var y=o.getModel("emphasis.itemStyle").getItemStyle();y.lineWidth=0,w.ensureState("emphasis").style=y,s(w);var P=O(I,!0);return P.setStyle({fill:"white"}),w.setClipPath(P),w}function U(e,t,a){var i=n.getItemModel(e),r=i.get("period"),l=i.get("direction"),o=n.get("value",e),s=i.get("phase");s=a?a.shape.phase:"auto"===s?e*Math.PI/4:s;var h,d,u=0;"auto"===r?(h=5e3,u=0===(d=n.count())?h:h*(.2+(d-e)/d*.8)):u="function"==typeof r?r(o,e):r;var p=0;"right"===l||null==l?p=Math.PI:"left"===l?p=-Math.PI:"none"===l?p=0:console.error("Illegal direction value for liquid fill."),"none"!==l&&i.get("waveAnimation")&&t.animate("shape",!0).when(0,{phase:s}).when(u/2,{phase:p+s}).when(u,{phase:2*p+s}).during((function(){k&&k.dirty(!0)})).start()}n.diff(q).add((function(t){var a=N(t,!1),l=a.shape.waterLevel;a.shape.waterLevel=E?b/2:I,r(a,{shape:{waterLevel:l}},e),a.z2=2,U(t,a,null),i.add(a),n.setItemGraphicEl(t,a),G.push(a)})).update((function(t,a){for(var r=q.getItemGraphicEl(a),o=N(t,!1,r),s={},h=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],d=0;d<h.length;++d){var u=h[d];o.shape.hasOwnProperty(u)&&(s[u]=o.shape[u])}var p={},g=["fill","opacity","shadowBlur","shadowColor"];for(d=0;d<g.length;++d){u=g[d];o.style.hasOwnProperty(u)&&(p[u]=o.style[u])}E&&(s.radiusY=b/2),l(r,{shape:s},e),r.useStyle(p),r.position=o.position,r.setClipPath(o.getClipPath()),r.shape.inverse=o.inverse,U(t,r,r),i.add(r),n.setItemGraphicEl(t,r),G.push(r)})).remove((function(e){var t=q.getItemGraphicEl(e);i.remove(t)})).execute(),g.get("label.show")&&i.add(function(t){var a=g.getModel("label");function i(){var t=e.getFormattedLabel(0,"normal"),a=100*n.get("value",0),i=n.getName(0)||e.name;return isNaN(a)||(i=a.toFixed(0)+"%"),null==t?i:t}var r={z2:10,shape:{x:B,y:W,width:2*(E?I[0]:I),height:2*(E?I[1]:I)},style:{fill:"transparent"},textConfig:{position:a.get("position")||"inside"},silent:!0},l={style:{text:i(),textAlign:a.get("align"),textVerticalAlign:a.get("baseline")}};Object.assign(l.style,h(a));var s=new d(r),v=new d(r);v.disableLabelAnimation=!0,s.disableLabelAnimation=!0;var c=new u(l),m=new u(l);s.setTextContent(c),v.setTextContent(m);var w=a.get("insideColor");m.style.fill=w;var f=new o;f.add(s),f.add(v);var y=O(I,!0);return(k=new p({shape:{paths:t},position:[Y,A]})).setClipPath(y),v.setClipPath(k),f}(G)),this._data=n},dispose:function(){}});
