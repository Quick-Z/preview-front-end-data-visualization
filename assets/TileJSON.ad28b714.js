import{Z as t,af as e,d as o,ag as i,ah as r,A as n}from"./ol.bbcea228.js";import{e as s,c as a,f as l,a as u}from"./TileImage.6719d572.js";import{j as c}from"./net.5778e213.js";var p,h=(p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function o(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),d=function(u){function p(i){var r=u.call(this,{attributions:i.attributions,cacheSize:i.cacheSize,crossOrigin:i.crossOrigin,imageSmoothing:i.imageSmoothing,projection:t("EPSG:3857"),reprojectionErrorThreshold:i.reprojectionErrorThreshold,state:e.LOADING,tileLoadFunction:i.tileLoadFunction,wrapX:void 0===i.wrapX||i.wrapX,transition:i.transition,zDirection:i.zDirection})||this;if(r.tileJSON_=null,r.tileSize_=i.tileSize,i.url)if(i.jsonp)c(i.url,r.handleTileJSONResponse.bind(r),r.handleTileJSONError.bind(r));else{var n=new XMLHttpRequest;n.addEventListener("load",r.onXHRLoad_.bind(r)),n.addEventListener("error",r.onXHRError_.bind(r)),n.open("GET",i.url),n.send()}else i.tileJSON?r.handleTileJSONResponse(i.tileJSON):o(!1,51);return r}return h(p,u),p.prototype.onXHRLoad_=function(t){var e=t.target;if(!e.status||e.status>=200&&e.status<300){var o=void 0;try{o=JSON.parse(e.responseText)}catch(i){return void this.handleTileJSONError()}this.handleTileJSONResponse(o)}else this.handleTileJSONError()},p.prototype.onXHRError_=function(t){this.handleTileJSONError()},p.prototype.getTileJSON=function(){return this.tileJSON_},p.prototype.handleTileJSONResponse=function(o){var u,c=t("EPSG:4326"),p=this.getProjection();if(void 0!==o.bounds){var h=i(c,p);u=r(o.bounds,h)}var d=s(p),f=o.minzoom||0,S=o.maxzoom||22,O=a({extent:d,maxZoom:S,minZoom:f,tileSize:this.tileSize_});if(this.tileGrid=O,this.tileUrlFunction=l(o.tiles,O),void 0!==o.attribution&&!this.getAttributions()){var m=void 0!==u?u:d;this.setAttributions((function(t){return n(m,t.extent)?[o.attribution]:null}))}this.tileJSON_=o,this.setState(e.READY)},p.prototype.handleTileJSONError=function(){this.setState(e.ERROR)},p}(u);export{d as T};
